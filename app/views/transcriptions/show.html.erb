<h1>Transcription #<%= @transcription.id %></h1>

<h3>Raw transcription</h3>
<pre><%= @transcription.raw_text || "Processing..." %></pre>

<button id="fetchSummary">Get Summary</button>
<div id="summary"><%= @transcription.summary_text.present? ? @transcription.summary_text : "No summary yet" %></div>

<script>
  document.getElementById("fetchSummary").addEventListener("click", async () => {
    const resp = await fetch("<%= summary_transcription_path(@transcription) %>");
    const data = await resp.json();
    if (resp.ok) document.getElementById("summary").innerText = data.summary;
  });
</script>
